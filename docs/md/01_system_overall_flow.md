# 系统总体流程图

## 描述
此流程图展示了 ProtoParse 系统从启动到运行的完整生命周期，包括初始化、用户交互和数据处理的主要流程。

## 流程图

```mermaid
flowchart TD
    A[系统启动] --> B[加载配置文件]
    B --> C[初始化日志系统]
    C --> D[启动 C++ 核心引擎]
    D --> E[初始化 libpcap]
    E --> F[加载协议解析插件]
    F --> G[启动 IPC 服务器]
    G --> H[启动 Python GUI]
    H --> I[建立 IPC 连接]
    I --> J[等待用户操作]
    
    J --> K{用户操作}
    K -->|开始抓包| L[设置 BPF 过滤器]
    K -->|停止抓包| M[停止数据捕获]
    K -->|配置更新| N[重新加载配置]
    K -->|退出程序| O[清理资源]
    
    L --> P[开始数据包捕获]
    P --> Q[TCP 流重组]
    Q --> R[协议解析]
    R --> S[发送解析结果到 GUI]
    S --> T[GUI 数据展示]
    T --> P
    
    M --> J
    N --> J
    O --> Z[程序退出]
    
    style A fill:#e1f5fe
    style Z fill:#ffebee
    style K fill:#fff3e0
    style P fill:#e8f5e8
```

## 关键节点说明

1. **系统启动阶段**：
   - 加载 YAML 配置文件
   - 初始化日志系统（spdlog）
   - 启动 C++ 核心引擎

2. **初始化阶段**：
   - 初始化 libpcap 库
   - 动态加载协议解析插件
   - 启动 Unix Domain Socket 服务器

3. **GUI 连接阶段**：
   - 启动 PySide2 图形界面
   - 建立 IPC 通信连接
   - 进入用户交互循环

4. **运行阶段**：
   - 响应用户操作（开始/停止抓包、配置更新等）
   - 实时数据处理循环
   - 数据展示和可视化

5. **退出阶段**：
   - 清理系统资源
   - 关闭网络接口
   - 程序正常退出
