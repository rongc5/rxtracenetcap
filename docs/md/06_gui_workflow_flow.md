# GUI 工作流程图

## 描述
此流程图展示了 Python GUI 的用户交互工作流程，包括界面初始化、用户操作处理和数据展示更新。

## 流程图

```mermaid
flowchart TD
    A[GUI 启动] --> B[初始化 PySide2]
    B --> C[创建主窗口]
    C --> D[初始化控制面板]
    D --> E[初始化数据展示区]
    E --> F[连接 IPC 客户端]
    F --> G[启动事件循环]
    
    G --> H{用户事件}
    H -->|开始抓包| I[发送启动命令]
    H -->|停止抓包| J[发送停止命令]
    H -->|配置设置| K[打开配置对话框]
    H -->|数据过滤| L[应用过滤条件]
    H -->|数据导出| M[选择导出格式]
    H -->|插件管理| N[打开插件管理器]
    
    I --> O[更新界面状态]
    J --> O
    K --> P[保存配置更改]
    P --> Q[发送配置更新]
    Q --> O
    
    L --> R[刷新数据显示]
    M --> S[执行数据导出]
    N --> T[加载插件列表]
    
    O --> U[等待数据更新]
    R --> U
    S --> U
    T --> U
    
    U --> V{接收到数据?}
    V -->|是| W[解析 JSON 数据]
    V -->|否| U
    
    W --> X[更新数据模型]
    X --> Y[刷新表格显示]
    Y --> Z[更新统计图表]
    Z --> AA[更新状态栏]
    AA --> U
    
    BB[程序退出] --> CC[保存用户设置]
    CC --> DD[断开 IPC 连接]
    DD --> EE[清理 GUI 资源]
    EE --> FF[退出应用]
    
    style A fill:#f3e5f5
    style H fill:#fff3e0
    style V fill:#fff3e0
    style BB fill:#ffebee
```

## 详细说明

### 1. 初始化阶段
- **PySide2 初始化**：设置 Qt 应用程序环境
- **主窗口创建**：创建主窗口和菜单栏
- **组件初始化**：初始化各个 UI 组件
- **IPC 连接**：建立与 C++ 核心的通信连接

### 2. 用户交互处理
- **抓包控制**：开始/停止抓包操作
- **配置管理**：修改系统配置参数
- **数据操作**：过滤、搜索、导出数据
- **插件管理**：启用/禁用协议解析插件

### 3. 数据展示更新
- **实时更新**：接收来自 C++ 核心的数据推送
- **数据模型**：使用 Qt 的 Model/View 架构
- **表格显示**：展示数据包列表和解析结果
- **图表可视化**：统计图表和趋势分析

### 4. 配置管理
- **用户设置**：保存用户的界面偏好设置
- **配置同步**：与 C++ 核心同步配置更改
- **配置验证**：验证配置参数的有效性

## GUI 组件说明

### 主要组件
1. **控制面板**：抓包控制、配置设置
2. **数据表格**：数据包列表显示
3. **详情面板**：协议解析结果详情
4. **统计图表**：流量统计和趋势图
5. **状态栏**：系统状态和统计信息

### 对话框
1. **配置对话框**：系统参数配置
2. **插件管理器**：插件启用/禁用管理
3. **导出对话框**：数据导出选项设置
4. **关于对话框**：软件版本和帮助信息
